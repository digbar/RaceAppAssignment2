spring:
  application:
    name: gateway-service

  cloud:
    gateway:
      routes:
        - id: runner-service
          uri: lb://runner-service
          predicates:
            - Path=/tusrunning/api/runners/**
          filters:
            - RewritePath=/tusrunning/api/(?<segment>.*), /api/${segment}
            - name: CircuitBreaker
              args:
                name: runnerCircuitBreaker
                fallbackUri: forward:/fallback/runners
resilience4j.circuitbreaker:
  instances:
    runnerCircuitBreaker:
      registerHealthIndicator: true
      slidingWindowSize: 5
      permittedNumberOfCallsInHalfOpenState: 3
      failureRateThreshold: 50
      waitDurationInOpenState: 10s

server:
  port: 9999
